\section{Elliptic Curves}

One of the more beautiful applications of algebra to
geometry can be seen on elliptic curves. Here, it is in
fact possible to form a group using points on non-singular
cubic curves. Where previous material was primarily focused
with algebra \emph{of} geometric structures, homogenous
polynomials and projective space, now we focus on 
algebra \emph{on} a geometric structure. This is similar to
the definition of the Dihedral group in that the
structure of the object in question is fundamental to the
structure of the group, but the group on the elliptic curve
is more complicated. We'll begin by stating some theorems
which will be used to prove that the structure which
arises is indeed a group.

\begin{theorem}
\label{thm:cubicintersectionpoints}
Let $k$ be an infinite field, and let $p_1, \dots, p_8 \in \mathbb{P}^2_k$
be distinct points. Additionally, suppose that no 4 of $p_1, \dots, p_8$ are
collinear, and no 7 lie on a non-degenerate conic (no 7 are con-conic). Then:
\[
	\dim S_3(p_1, \dots, p_8) = 2
\]
That is, the set of all cubics which pass through $p_1, \dots, p_8$ can in
fact be considered a vector space, with a basis of the defining equations $F_1, F_2$
of the 2 cubic curves. Thus
\[
	D \in S_3(p_1, \dots, p_8) \implies \exists \alpha, \beta : D = \alpha F_1 + \beta F_2
\]
\end{theorem}

\begin{theorem}
\emph{Corrollary:}
Let $C_1, C_2$ be two cubic curves whose intersection contains 9 distinct points;
$C_1 \cap C_2 = \{p_1, \dots, p_9\}$. Then, a cubic $D$ which passes through 
$\{p_1, \dots, p_8\}$ also passes through $p_9$.
\end{theorem}

\begin{proof}
If 4 of the points were collinear on some line $L$, then each of $C_1,C_2$ contain $L$.
by Bezout's Theorem, any intersection of $C_1$ (resp. $C_2$) with $L$ has precisely $3 \cdot 1 = 3$
points. So, the only way to have more points of intersection is if the line $L$ were
contained in $C_1$ (resp. $C_2$).
But then, $L \subset C_1 \cap C_2$, so $C_1 \cap C_2$ would contain infinitely many points,
a contradiction. Thus, no 4 points of intersection can be collinear.

Likewise, no 7 points can be con-conic. Bezout's theorem forces precisely
$3 \cdot 2 = 6$ points of intersection. Thus, if 7 points lied on a common
conic $E$ then $E \subset C_1 \cap C_2$, thus $C_1 \cap C_2$ has more than
9 points, a contradiction.

Thus, WLOG $\{p_1, \dots, p_8\}$ satisfy the hypotheses of theorem \ref{thm:cubicintersectionpoints},
so we now know that 
\[
	\dim S_3(p_1, \dots, p_8) = 2
\]
So, the defining equations $F_1, F_2$ of $C_1, C_2$ form a basis of 
$S_3(p_1, \dots, p_8)$. Thus, the cubic $D$ which passes through
$\{p_1, \dots, p_8\}$ is defined by some equation $G$ ($D:(G=0)$),
thus $G \in S_3(p_1, \dots, p_8)$ so $G = \alpha F_1 + \beta F_2$.
But now, we know that $F_1(p_9) = 0 = F_2(p_9)$, thus
$G(p_9) = \alpha \cdot 0 + \beta \cdot 0 = 0$, so $D$ passes through $p_9$.
\end{proof}


\begin{mydef}
\label{def:ellipticgroup}
\emph{Group Law on a Plane Cubic:}
Suppose $k \subset \mathbb{C}$ is a subfield of $\mathbb{C}$,
and $F \in k[X,Y,Z]$ is a cubic form defining a non-empty plane
curve $\mathfrak{C}:(F=0) \subset \mathbb{P}^2_k$. Additionally, assume that
$F$ satisfies the following:
\begin{align*}
F \text{ is irreducible, so $\mathfrak{C}$ won't contain a line or conic}&\tag{a}\\
\forall P \in \mathfrak{C},~\exists!~line~L \subset \mathbb{P}^2_k~s.t.~ P
\text{ is a repeated zero of } F|_L& \tag{b}\\
\end{align*}

Now, fix any point $O \in \mathfrak{C}$ and make the following construction:
\begin{align*}
&\text{for } A \in \mathfrak{C}, \text{ let } \bar{A} \text{ be the third point of intersection of $\mathfrak{C}$ with $\overleftrightarrow{OA}$} \tag{i}\\
&\text{for } A, B \in \mathfrak{C} \text{ let } R \text{ be the third point of intersection of $\mathfrak{C}$ with $\overleftrightarrow{AB}$}\\
&\text{ and define $A+B = \bar{R}$}\tag{ii}\\
\end{align*}
\end{mydef}

Geometrically, the uniqueness in (b) says that $\mathfrak{C}$ should be non-singular,
and we can see that this line $L$ is in fact the tangent line to $\mathfrak{C}$ at $P$.
Likewise, (a) prevents somewhat degenerate cases.

As you may have noticed, we've defined an operation on points of this
cubic curve $\mathfrak{C}$, so naturally we're curious what sort of structure then
arises. It turns out that this actually defines an Abelian Group on $\mathfrak{C}$,
as we will now prove.

\begin{theorem}
The above construction (Definition \ref{def:ellipticgroup}) defines
an Abelian Group $(\mathfrak{C},+)$ with $O$ as the identity element.
\end{theorem}

\begin{proof}
Well, to prove this is an abelian group, we have a few conditions we must satisfy:
\begin{enumerate}
\item Well-definedness of the operation and inverses
\item Existence of an identity element
\item Existence of unique inverses
\item Commutativity
\item Associativity
\end{enumerate}

\emph{Well-Definedness:}\\
Let $P, Q \in \mathfrak{C}$. Then, we have two simple cases:\\

case 1:  $P \ne Q$. Then $\exists! L \subset \mathbb{P}^2_k$ such that $L = \overleftrightarrow{PQ}$.\\

case 2: $P = Q$. Then, part (b) of the definition gives that $\exists! L \subset \mathbb{P}^2_k$ such that
$P$ is a repeated root of $F|_L$.\\

Note, however, that in both cases $F|_L$ is a cubic form in 2 variables.
So, as $F|_L$ is a 3rd degree form, it has precisely 3 roots, 2 of which
are the $k$-valued points $P$ and $Q$. Well, $P \in \mathbb{P}^2_k,~Q\in \mathbb{P}^2_k$,
so $F|_L$ is the product of 3 linear terms from $k[X,Y,Z]$. Thus, the
third root of $F|_L$ is certainly defined, and must also be from $\mathbb{P}^2_k$, and of course from $\mathfrak{C}$.

So, given any two points on $\mathfrak{C}$, the line they determine intersects $\mathfrak{C}$ at some third point.
Thus our construction, which relies on such a third point existing, is well defined. That is,
Given any $A \in \mathfrak{C},~\bar{A}$ is a unique element of $\mathfrak{C}$, and given any $A, B \in \mathfrak{C},~A+B$ 
is a unique point of $\mathfrak{C}$.\\

\emph{Commutativity:}\\
Well, need to show that $A+B = B+A$. Miles Reid chooses to ``leave this to the reader", 
and likewise we won't elaborate on this. Simply note that $\overleftrightarrow{AB} = \overleftrightarrow{BA}$,
so they share the same 3rd point of intersection with $\mathfrak{C}$.\\

\emph{Identity:}\\
Let $A \in \mathfrak{C}$ be some arbitrary point of $\mathfrak{C}$, and consider $O+A$.
Well, by our construction, we first find the third point
of intersection of $\overleftrightarrow{OA}$ with $\mathfrak{C}$, which by (i)
is $\bar{A}$. From here, to find $O+A$ we must now find the
third point of intersection of $\overleftrightarrow{O\bar{A}}$ with $\mathfrak{C}$. However, note
that $O,~A,~\bar{A}$ are all collinear. Thus, this third point
of intersection of $\overleftrightarrow{O\bar{A}}$ with $\mathfrak{C}$ is $A$. Hence, $O+A=A,~\forall A \in \mathfrak{C}$.\\

\emph{Inverses:}\\
Let $L$ be the line tanget to $\mathfrak{C}$ at $O$. That is, $L$ is the unique line s.t.
$F|_L$ has $O$ as a repeated zero. Now, let $\bar{O}$ be the 3rd root of $F|_L$.
Now, given any point $A \in \mathfrak{C}$, we can see that the third point of intersection
of $\overleftrightarrow{A\bar{O}}$ with $\mathfrak{C}$ is the inverse of $A$.

Call this third point of intersection $A'$. Now, consider $A+A'$. By definition,
$A,~A',~\bar{O}$ are all collinear, so the third point of intersection of 
$\overleftrightarrow{AA'}$ with $\mathfrak{C}$ is $\bar{O}$. Now, by how we defined
$\bar{O}$, we know that the third point of intersection of $\mathfrak{C}$ with $\overleftrightarrow{O\bar{O}}$
is $O$, as $O$ is a repeated root of this line. Thus, $A+A' = O$, so in the
future we'll refer to such an $A'$ as $A^{-1}$.

Finally, note that as $A^{-1}$ was picked as the third point of intersection of
$\mathfrak{C}$ with $\overleftrightarrow{A\bar{O}}$, it is well-defined.\\

\emph{Associativity:}\\
Associativity is by far the most difficult part of this proof. We'll first prove 
Associativity for one case, and then reduce the general case to this special case.\\

Suppose that $A,B,C \in \mathfrak{C}$. We want to show that $(A+B)+C = A+(B+C)$.
Well, in the construction of $(A+B)+C$ we use the 4 lines
\[
L_1: \overleftrightarrow{ABR},~L_2: \overleftrightarrow{RO\bar{R}},~L_3: \overleftrightarrow{C\bar{R}S},~L_4: \overleftrightarrow{SO\bar{S}}
\]
Likewise, the construction of $A+(B+C)$ involves
\[
M_1: \overleftrightarrow{BCQ},~M_2: \overleftrightarrow{QO\bar{Q}},~M_3: \overleftrightarrow{A\bar{Q}S'},~M_4: \overleftrightarrow{S'O\bar{S'}}
\]

Clearly, $(A+B)+C = A+(B+C) \iff \bar{S}=\bar{S'} \iff S=S'$. We'll prove $S=S'$ by inspecting the two cubics
\[
	D_1 = L_1 + M_2 + L_3 \text{ and } D_2 = M_1 + L_2 + M_3
\]
TODO: \emph{clearly} define what this ``$+$" operation on curves is. are we
taking the product of their defining polynomials? I suspect so, but
this definition raises other concerns on the applicability of other theorems,
such as ``if two cubics intersect 8 of 9 common points they both intersect the 9th".
study this later...\\

Thus, by construction we have
\[
	\mathfrak{C} \cap D_1 = \{A, B, C, O, R, \bar{R}, Q, \bar{Q}, S\}
\]
and
\[
	\mathfrak{C} \cap D_2 = \{A, B, C, O, R, \bar{R}, Q, \bar{Q}, S'\}
\]

Now, assuming all 9 points of $\mathfrak{C} \cap D_1$ are distinct, then $\mathfrak{C}$ and $D_1$
satisfy the conditions of proposition 2.7 (TODO: add prop. 2.7 from book to earlier sections),
so $D_2$ must pass through the 9th point $S$, which is only possible if $S'=S$.
Hence, $\bar{S} = \bar{S'}$ and, so long as our construction involves 9 distinct points,
$+$ is Associative.

Now, to extend to the more general case of points $A,B,C \in \mathfrak{C}$
which don't necessarily involve only distinct points in the construction
of $(A+B)+C$ or $A+(B+C)$. We'll make use of some concepts from calculus here.

First, some useful lemmas:
\begin{lemma}
\label{lem:cubicgroupcts}
$+$ is a continuous function. Thus, as the composition of continuous functions, both
\[
(A,B,C) \mapsto (A+B)+C
\]
\[
(A,B,C) \mapsto A+(B+C)
\]
are continuous
\end{lemma}

\begin{lemma}
\label{lem:cubicgroupsequence}
$\forall A,B,C \in \mathfrak{C}, \exists A',B',C' \in \mathfrak{C}$ arbitrarily near $A,B,C$
such that the 9 points $\{A,B,C,O,R,\bar{R},Q,\bar{Q},S\}$ are distinct.

Specifically, there exist sequences $(A_n), (B_n), (C_n)$ s.t.
\[
A_n \to A,~B_n \to B,~C_n \to C \text{ as } n \to \infty.
\]
\end{lemma}

Thus, $\forall n \in \mathbb{N}$ the previous limited proof of associativity gives
that 
\[
	(A_n+B_n)+C_n = A_n+(B_n+C_n) \tag{*}
\]
Now, by the continuity in Lemma \ref{lem:cubicgroupcts},
we have the following limits using the sequences from Lemma \ref{lem:cubicgroupsequence}:
\[
	\lim_{n \to \infty} (A_n + B_n) + C_n = (A+B)+C
\]
\[
	\lim_{n \to \infty} A_n + (B_n + C_n) = A+(B+C)
\]

But, by the above noted equality (*) gained from Lemma \ref{lem:cubicgroupsequence},
we know that 
\[
	\lim_{n \to \infty} (A_n + B_n) + C_n = \lim_{n \to \infty} A_n + (B_n + C_n) 
\]

Thus, by uniqueness of limits
\[
	(A+B)+C = A+(B+C)
\]


More specifically, we can see from Lemma \ref{lem:cubicgroupsequence} that the set of
such points $(A,B,C)$ where the 9 involved points of the construction are distinct
is in fact dense in $\mathfrak{C} \times \mathfrak{C} \times \mathfrak{C}$. Thus,
as the two functions from Lemma \ref{lem:cubicgroupcts} agree on this
dense set, they agree everywhere on $\mathfrak{C} \times \mathfrak{C} \times \mathfrak{C}$,
giving us Associativity $\forall A,B,C \in \mathfrak{C}$.\\

Therefore, $(\mathfrak{C},+)$ is an Abelian Group.
\end{proof}

It should be noted that the fact the curve is cubic is quite important.
This allows us to have precisely 3 points of intersection when intersecting
our curve with a line, letting us define a relatively natural
operation based on this. On the contrary, a quartic curve would have 4
points of intersection with a line, and an increasing number of points
if we were to consider intersections with conics and cubics, so 
it's even less clear how we would define an operation here to get a group.
Likewise, intersections of a line with another line are so trivial
it's hard to imagine such an interesting structure arising.

Also note curves of the form $y^2 = x^3 + ax + b$ fulfill the requirements
of our theorem, and are symmetric about the x-axis. In practice,
the identity $O$ is taken to be the ideal point at infinity (since we are
really in $\mathbb{P}^2_k \subset \mathbb{P}^2_\mathbb{C}$), allowing
for all vertical lines to intersect $O$. As our curve tends towards
infinity, it also intersects $O$, so everything is still well-defined.
The benefit of this approach is that calculating inverses is trivial:
$A=(x,y) \implies A^{-1} = (x, -y)$. Once we pair this with a field $k$
with desirable number-theoretic properties, we enter the realm of
cryptography using elliptic curves, and travel far outside the
scope of this short paper.
